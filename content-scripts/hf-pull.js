var _hf_pull=function(){"use strict";function J(s){return s}var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var O={exports:{}};(function(s,i){(function(n,g){g(s)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:D,function(n){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)n.exports=globalThis.browser;else{const g="The message port closed before a response was received.",w=l=>{const p={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(p).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class f extends WeakMap{constructor(r,a=void 0){super(a),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}const h=e=>e&&typeof e=="object"&&typeof e.then=="function",y=(e,r)=>(...a)=>{l.runtime.lastError?e.reject(new Error(l.runtime.lastError.message)):r.singleCallbackArg||a.length<=1&&r.singleCallbackArg!==!1?e.resolve(a[0]):e.resolve(a)},u=e=>e==1?"argument":"arguments",E=(e,r)=>function(o,...A){if(A.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${u(r.minArgs)} for ${e}(), got ${A.length}`);if(A.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${u(r.maxArgs)} for ${e}(), got ${A.length}`);return new Promise((c,d)=>{if(r.fallbackToNoCallback)try{o[e](...A,y({resolve:c,reject:d},r))}catch(t){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,t),o[e](...A),r.fallbackToNoCallback=!1,r.noCallback=!0,c()}else r.noCallback?(o[e](...A),c()):o[e](...A,y({resolve:c,reject:d},r))})},T=(e,r,a)=>new Proxy(r,{apply(o,A,c){return a.call(A,e,...c)}});let M=Function.call.bind(Object.prototype.hasOwnProperty);const N=(e,r={},a={})=>{let o=Object.create(null),A={has(d,t){return t in e||t in o},get(d,t,x){if(t in o)return o[t];if(!(t in e))return;let m=e[t];if(typeof m=="function")if(typeof r[t]=="function")m=T(e,e[t],r[t]);else if(M(a,t)){let v=E(t,a[t]);m=T(e,e[t],v)}else m=m.bind(e);else if(typeof m=="object"&&m!==null&&(M(r,t)||M(a,t)))m=N(m,r[t],a[t]);else if(M(a,"*"))m=N(m,r[t],a["*"]);else return Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get(){return e[t]},set(v){e[t]=v}}),m;return o[t]=m,m},set(d,t,x,m){return t in o?o[t]=x:e[t]=x,!0},defineProperty(d,t,x){return Reflect.defineProperty(o,t,x)},deleteProperty(d,t){return Reflect.deleteProperty(o,t)}},c=Object.create(e);return new Proxy(c,A)},I=e=>({addListener(r,a,...o){r.addListener(e.get(a),...o)},hasListener(r,a){return r.hasListener(e.get(a))},removeListener(r,a){r.removeListener(e.get(a))}}),Y=new f(e=>typeof e!="function"?e:function(a){const o=N(a,{},{getContent:{minArgs:0,maxArgs:0}});e(o)}),q=new f(e=>typeof e!="function"?e:function(a,o,A){let c=!1,d,t=new Promise(S=>{d=function(b){c=!0,S(b)}}),x;try{x=e(a,o,d)}catch(S){x=Promise.reject(S)}const m=x!==!0&&h(x);if(x!==!0&&!m&&!c)return!1;const v=S=>{S.then(b=>{A(b)},b=>{let F;b&&(b instanceof Error||typeof b.message=="string")?F=b.message:F="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:F})}).catch(b=>{console.error("Failed to send onMessage rejected reply",b)})};return v(m?x:t),!0}),Z=({reject:e,resolve:r},a)=>{l.runtime.lastError?l.runtime.lastError.message===g?r():e(new Error(l.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?e(new Error(a.message)):r(a)},B=(e,r,a,...o)=>{if(o.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${u(r.minArgs)} for ${e}(), got ${o.length}`);if(o.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${u(r.maxArgs)} for ${e}(), got ${o.length}`);return new Promise((A,c)=>{const d=Z.bind(null,{resolve:A,reject:c});o.push(d),a.sendMessage(...o)})},X={devtools:{network:{onRequestFinished:I(Y)}},runtime:{onMessage:I(q),onMessageExternal:I(q),sendMessage:B.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:B.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},L={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return p.privacy={network:{"*":L},services:{"*":L},websites:{"*":L}},N(l,X,p)};n.exports=w(chrome)}})})(O);var U=O.exports;const R=j(U),W={main(s){const i=async l=>confirm(`[Page Assist Extension] Do you want to pull the ${l} model? This has nothing to do with the huggingface.co website. The model will be pulled locally once you confirm. Make sure Ollama is running.`)?(alert(`[Page Assist Extension] Pulling ${l} model. For more details, check the extension icon.`),await R.runtime.sendMessage({type:"pull_model",modelName:l}),!0):!1,n=`
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="16" height="16">
          <path d="M12 16l-6-6h4V4h4v6h4l-6 6z"/>
          <path d="M4 20h16v-2H4v2z"/>
        </svg>
      `,g=l=>{const p=l.querySelector('button[title="Copy snippet to clipboard"]');if(p&&!l.querySelector(".pageassist-download-button")){const f=p.cloneNode(!0);f.classList.add("pageassist-download-button"),f.querySelector("svg").outerHTML=n,f.querySelector("span").textContent="Pull from Page Assist",f.addEventListener("click",async()=>{const y=l.querySelector("pre");if(y){let u="";y.childNodes.forEach(E=>{if(E.nodeType===Node.TEXT_NODE)u+=E.textContent;else if(E instanceof HTMLSelectElement)u+=E.value;else if(E instanceof HTMLElement){const T=E.querySelector("select");T?u+=T.value:u+=E.textContent}}),u=u.trim(),await i(u?.replaceAll("ollama run","")?.replaceAll("ollama pull","")?.trim())}});const h=document.createElement("div");h.classList.add("mb-3"),h.style.display="flex",h.style.justifyContent="flex-end",h.appendChild(f),l.querySelector("pre").insertAdjacentElement("afterend",h)}};new MutationObserver(l=>{for(const p of l)p.addedNodes.forEach(f=>{if(f instanceof HTMLElement){const h=f.querySelector(".shadow-alternate");h&&g(h)}})}).observe(document.body,{childList:!0,subtree:!0})},allFrames:!0,matches:["*://huggingface.co/*"]};function C(s,...i){}const V={debug:(...s)=>C(console.debug,...s),log:(...s)=>C(console.log,...s),warn:(...s)=>C(console.warn,...s),error:(...s)=>C(console.error,...s)},G={BASE_URL:"/",BROWSER:"chrome",CHROME:!0,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"hf-pull",FIREFOX:!1,MANIFEST_VERSION:3,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"};class _ extends Event{constructor(i,n){super(_.EVENT_NAME,{}),this.newUrl=i,this.oldUrl=n}static EVENT_NAME=$("wxt:locationchange")}function $(s){const i=typeof G>"u"?"build":"hf-pull";return`${R?.runtime?.id}:${i}:${s}`}function H(s){let i,n;return{run(){i==null&&(n=new URL(location.href),i=s.setInterval(()=>{let g=new URL(location.href);g.href!==n.href&&(window.dispatchEvent(new _(g,n)),n=g)},1e3))}}}class k{constructor(i,n){this.contentScriptName=i,this.options=n,this.#e=new AbortController,this.#s?(this.#r({ignoreFirstEvent:!0}),this.#n()):this.#r()}static SCRIPT_STARTED_MESSAGE_TYPE="wxt:content-script-started";#s=window.self===window.top;#e;#t=H(this);get signal(){return this.#e.signal}abort(i){return this.#e.abort(i)}get isInvalid(){return R.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(i){return this.signal.addEventListener("abort",i),()=>this.signal.removeEventListener("abort",i)}block(){return new Promise(()=>{})}setInterval(i,n){const g=setInterval(()=>{this.isValid&&i()},n);return this.onInvalidated(()=>clearInterval(g)),g}setTimeout(i,n){const g=setTimeout(()=>{this.isValid&&i()},n);return this.onInvalidated(()=>clearTimeout(g)),g}requestAnimationFrame(i){const n=requestAnimationFrame((...g)=>{this.isValid&&i(...g)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(i,n){const g=requestIdleCallback((...w)=>{this.signal.aborted||i(...w)},n);return this.onInvalidated(()=>cancelIdleCallback(g)),g}addEventListener(i,n,g,w){n==="wxt:locationchange"&&this.isValid&&this.#t.run(),i.addEventListener?.(n.startsWith("wxt:")?$(n):n,g,{...w,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),V.debug(`Content script "${this.contentScriptName}" context invalidated`)}#n(){window.postMessage({type:k.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}#r(i){let n=!0;const g=w=>{if(w.data?.type===k.SCRIPT_STARTED_MESSAGE_TYPE&&w.data?.contentScriptName===this.contentScriptName){const l=n;if(n=!1,l&&i?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",g),this.onInvalidated(()=>removeEventListener("message",g))}}function Q(){}function P(s,...i){}const z={debug:(...s)=>P(console.debug,...s),log:(...s)=>P(console.log,...s),warn:(...s)=>P(console.warn,...s),error:(...s)=>P(console.error,...s)};return(async()=>{try{const{main:s,...i}=W,n=new k("hf-pull",i);return await s(n)}catch(s){throw z.error('The content script "hf-pull" crashed on startup!',s),s}})()}();
_hf_pull;
